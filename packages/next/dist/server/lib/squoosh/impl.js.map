{"version":3,"sources":["../../../../server/lib/squoosh/impl.ts"],"names":["semver","supportedFormats","codecs","preprocessors","ImageData","FIXED_VERSION","DELAY_MS","_promise","delayOnce","ms","Promise","resolve","setTimeout","maybeDelay","isAppleM1","process","arch","platform","lt","version","decodeBuffer","_buffer","buffer","Buffer","from","firstChunk","slice","firstChunkString","Array","map","v","String","fromCodePoint","join","key","Object","entries","find","detectors","some","detector","exec","Error","d","dec","decode","Uint8Array","rotate","image","numRotations","m","instantiate","data","width","height","resize","p","defaultOptions","encodeJpeg","quality","e","enc","r","encode","defaultEncoderOptions","encodeWebp","encodePng"],"mappings":"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"}